<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<style>
	h2, h3 { text-align: center;}
	#container { 
	    display : flex;
	    justify-content: space-around;
	}
	#box1 {
	    width: 50%; 
	    border: 2px solid black;
	    border-radius : 10px;
	    padding: 10px;
	}
	#box2 {
	    width: 30%;
	    border: 2px solid black;
	    border-radius : 10px;
	    padding: 10px; 
	}

</style>
</head>
<body>
	<h2>Article Rest Api Test</h2>
	<div id="container">
	  <div id="box1">
        <form >
		  <div class="row mb-3">
		    <label for="id"    class="col-form-label col-sm-2">아이디</label>
		    <div class="col-sm-10">
		       <input type="text" class="form-control" id="id" >
		    </div>		    
		  </div>
		  <div class="row mb-3">
		    <label for="id2"    class="col-form-label col-sm-2">수정할 아이디</label>
		    <div class="col-sm-10">
		      <input type="text"  class="form-control col-sm-10" id="id2" >
		    </div>  		    
		  </div>
		  <div class="row mb-3">
		    <label for="title"   class="col-form-label col-sm-2">제목</label>
		    <div class="col-sm-10">
		       <input type="text"   class="form-control" id="title" >
		    </div>   		    
		  </div>
		  <div class="mb-3">		    
		    <label for="content"    class="form-label">내용</label>
		    <textarea class="form-control" id="content" rows="4"></textarea>		    
		  </div>
		  
		  </form>
	  </div>
      <div class="list-group" id="box2">
		  <a href="/api/articles"  id="getlist"
		     class="list-group-item list-group-item-action" aria-current="true">
		    목록조회
		  </a>
		  <a href="/api/articles/2" id="get" 
		     class="list-group-item list-group-item-action">
		     한개 조회
		  </a>
		  <a href="/api/articles" id="post" 
		     class="list-group-item list-group-item-action">
		     추가
		  </a>
		  <a href="/api/articles"id="patch"
		     class="list-group-item list-group-item-action">
		     수정
		  </a>
		  <a href="/api/articles" id="delete" 
		     class="list-group-item list-group-item-action" 
		     tabindex="-1" aria-disabled="false">
		     삭제
		  </a>
		</div>

	  </div>
	</div>
	
	<h3>결과</h3>
	<div id="result" style="margin-bottom:150px" ></div>
	
	<!-- script 영역  ECMA Script 6 -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	
	<script>
	   function makeTable( list ) {
		   let  table   = '<table class="table table-striped mx-auto" style="width:90%;">'
		   table       += '<tr class="table-dark">'
		   table       += '<th>#</th>'
		   table       += '<th>Title</th>'
		   table       += '<th>Content</th>'		   
		   table       += '</tr>'
		   
		   list.forEach( function( article ) {
			   table       += '<tr>'
			   table       += `<td>${ article.id      }</td>`
			   table       += `<td>${ article.title   }</td>`
			   table       += `<td>${ article.content }</td>`			   
			   table       += '</tr>'
		   })
		   
		   table       += '</table>';
		   return  table;
	   }
	   
	   function activeClear(aEls) {
		   
		   aEls.forEach( ( aEl ) => {
			   aEl.classList.remove('active')
		   })
		   
	   }
	</script>
	
	<script>
	   //  a tag  클릭시 동작
	   const  aEls     =  document.querySelectorAll('a')   //  a tag 뱌열
	   const  resultEl =  document.querySelector('#result');
	   aEls.forEach(function( a ) {
		   a.onclick = function( event ) {
			   activeClear(aEls)	
			   a.classList.add('active')			  
			   
			   event.preventDefault();   // a tag 의 기본이벤트(href 로 이동)를 취소  
			   event.stopPropagation();  // 이벤트 버블링을 중지
			   
			   console.log(a);
			   //alert(a.innerHTML)
			   switch(a.id) {
			   case 'getlist':    
				   // api controller 실행데이터 받아온다(fetch)
				   fetch( a.href )
				     .then( response => response.json() )
				     .then( list     => {
				    	 console.log(list)
				    	 resultEl.innerHTML = makeTable( list )
				     }  )
				     .then(error => console.log(error) )
				   break;			  
			   }
		   }
	   })
	
	</script>
	
</body>
</html>





